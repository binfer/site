<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="smoke">
  <meta name="description" content="smoke.mvp">
  <meta name="keywords" content="smoke">
  
  <link rel="prev" href="/blog/mac/clear-time-machine/" />
  <link rel="next" href="/blog/nginx/check-nginx-sh/" />
  <link rel="canonical" href="/blog/go/transfer-en-zh/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Transfer en Zh | smoke
       
  </title>
  <meta name="title" content="Transfer en Zh | smoke">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": ""
    },
    "articleSection" : "blog",
    "name" : "Transfer en Zh",
    "headline" : "Transfer en Zh",
    "description" : "![*](https:\/\/img.shields.io\/static\/v1?label=smoke\x26amp;message=\x26amp;color=green\x26amp;style=for-the-badge\x26amp;logo=appveyor) cli 翻译 package main import ( \x26#34;encoding\/xml\x26#34; \x26#34;github.com\/bndr\/gotabulate\x26#34; \x26#34;github.com\/fatih\/color\x26#34; \x26#34;fmt\x26#34; \x26#34;io\/ioutil\x26#34; \x26#34;net\/http\x26#34; \x26#34;net\/url\x26#34; \x26#34;os\x26#34; \x26#34;strings\x26#34; ) type ParseXmlData struct { XMLName xml.Name `xml:\x26#34;yodaodict\x26#34;` RawInput string `xml:\x26#34;return-phrase\x26#34;` CustomTrans CustomNode `xml:\x26#34;custom-translation\x26#34;` WebTrans WebTransList `xml:\x26#34;yodao-web-dict\x26#34;` } type CustomNode struct { Type string `xml:\x26#34;type\x26#34;` Translation []Translation `xml:\x26#34;translation\x26#34;` } type WebTransList struct { TransNode []WebTransNode `xml:\x26#34;web-translation\x26#34;` } type WebTransNode struct { Key string `xml:\x26#34;key\x26#34;` Trans []TransNode `xml:\x26#34;trans\x26#34;` } type TransNode struct { Value string `xml:\x26#34;value,CDATA\x26#34;` } type Translation struct { Content string `xml:\x26#34;content,CDATA\x26#34;` } func HttpGet(url string, ch chan []byte) { resp, err := http.",
    "inLanguage" : "en-us",
    "author" : "smoke",
    "creator" : "smoke",
    "publisher": "smoke",
    "accountablePerson" : "smoke",
    "copyrightHolder" : "smoke",
    "copyrightYear" : "2019",
    "datePublished": "2019-12-06 17:48:02 \x2b0800 CST",
    "dateModified" : "2019-12-06 17:48:02 \x2b0800 CST",
    "url" : "\/blog\/go\/transfer-en-zh\/",
    "wordCount" : "267",
    "keywords" : [ "go", "smoke"]
}
</script>

</head>

  


<link href="/css/awesome.min.css" type="application/rss+xml" />
<script src="/js/jquery.min.js" async=""></script>
<script src="/js/autoload.js" async=""></script>

  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="">smoke</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/blog/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about" title="">About</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="">smoke</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/blog/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about" title="">About</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Transfer en Zh</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="" rel="author">smoke</a> with ♥ 
                <span class="post-time">
                on <time datetime=2019-12-06 itemprop="datePublished">December 6, 2019</time>
                </span>
                in
                
        </div>
    </header>
    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          <h4 id="httpsimgshieldsiostaticv1labelsmokemessagetransfer-en-zhcolorgreenstylefor-the-badgelogoappveyor">![*](<a href="https://img.shields.io/static/v1?label=smoke&amp;message=">https://img.shields.io/static/v1?label=smoke&amp;message=</a><!-- raw HTML omitted -->&amp;color=green&amp;style=for-the-badge&amp;logo=appveyor)</h4>
<h4 id="cli-">cli 翻译</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go">
<span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (

  <span style="color:#e6db74">&#34;encoding/xml&#34;</span>
  <span style="color:#e6db74">&#34;github.com/bndr/gotabulate&#34;</span>
  <span style="color:#e6db74">&#34;github.com/fatih/color&#34;</span>
  <span style="color:#e6db74">&#34;fmt&#34;</span>
  <span style="color:#e6db74">&#34;io/ioutil&#34;</span>
  <span style="color:#e6db74">&#34;net/http&#34;</span>
  <span style="color:#e6db74">&#34;net/url&#34;</span>
  <span style="color:#e6db74">&#34;os&#34;</span>
  <span style="color:#e6db74">&#34;strings&#34;</span>
)

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">ParseXmlData</span> <span style="color:#66d9ef">struct</span> {

  <span style="color:#a6e22e">XMLName</span>     <span style="color:#a6e22e">xml</span>.<span style="color:#a6e22e">Name</span>     <span style="color:#e6db74">`</span><span style="color:#e6db74">xml:&#34;yodaodict&#34;</span><span style="color:#e6db74">`</span>

  <span style="color:#a6e22e">RawInput</span>    <span style="color:#66d9ef">string</span>       <span style="color:#e6db74">`</span><span style="color:#e6db74">xml:&#34;return-phrase&#34;</span><span style="color:#e6db74">`</span>

  <span style="color:#a6e22e">CustomTrans</span> <span style="color:#a6e22e">CustomNode</span>   <span style="color:#e6db74">`</span><span style="color:#e6db74">xml:&#34;custom-translation&#34;</span><span style="color:#e6db74">`</span>

  <span style="color:#a6e22e">WebTrans</span>    <span style="color:#a6e22e">WebTransList</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">xml:&#34;yodao-web-dict&#34;</span><span style="color:#e6db74">`</span>

}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">CustomNode</span> <span style="color:#66d9ef">struct</span> {

  <span style="color:#a6e22e">Type</span>        <span style="color:#66d9ef">string</span>        <span style="color:#e6db74">`</span><span style="color:#e6db74">xml:&#34;type&#34;</span><span style="color:#e6db74">`</span>

  <span style="color:#a6e22e">Translation</span> []<span style="color:#a6e22e">Translation</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">xml:&#34;translation&#34;</span><span style="color:#e6db74">`</span>

}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">WebTransList</span> <span style="color:#66d9ef">struct</span> {

  <span style="color:#a6e22e">TransNode</span> []<span style="color:#a6e22e">WebTransNode</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">xml:&#34;web-translation&#34;</span><span style="color:#e6db74">`</span>

}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">WebTransNode</span> <span style="color:#66d9ef">struct</span> {

  <span style="color:#a6e22e">Key</span>   <span style="color:#66d9ef">string</span>      <span style="color:#e6db74">`</span><span style="color:#e6db74">xml:&#34;key&#34;</span><span style="color:#e6db74">`</span>

  <span style="color:#a6e22e">Trans</span> []<span style="color:#a6e22e">TransNode</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">xml:&#34;trans&#34;</span><span style="color:#e6db74">`</span>

}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">TransNode</span> <span style="color:#66d9ef">struct</span> {

  <span style="color:#a6e22e">Value</span> <span style="color:#66d9ef">string</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">xml:&#34;value,CDATA&#34;</span><span style="color:#e6db74">`</span>

}

<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Translation</span> <span style="color:#66d9ef">struct</span> {

  <span style="color:#a6e22e">Content</span> <span style="color:#66d9ef">string</span> <span style="color:#e6db74">`</span><span style="color:#e6db74">xml:&#34;content,CDATA&#34;</span><span style="color:#e6db74">`</span>

}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">HttpGet</span>(<span style="color:#a6e22e">url</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">ch</span> <span style="color:#66d9ef">chan</span> []<span style="color:#66d9ef">byte</span>) {

  <span style="color:#a6e22e">resp</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">Get</span>(<span style="color:#a6e22e">url</span>)
  <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">==</span> <span style="color:#66d9ef">nil</span> {
    <span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">resp</span>.<span style="color:#a6e22e">Body</span>.<span style="color:#a6e22e">Close</span>()
  }
  <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
    <span style="color:#a6e22e">color</span>.<span style="color:#a6e22e">Red</span>(<span style="color:#e6db74">&#34;please enter ctrl+c ,request error: %s \n&#34;</span>, <span style="color:#a6e22e">err</span>)
  }
  <span style="color:#a6e22e">body</span>, <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ioutil</span>.<span style="color:#a6e22e">ReadAll</span>(<span style="color:#a6e22e">resp</span>.<span style="color:#a6e22e">Body</span>)
  <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">err</span> <span style="color:#f92672">!=</span> <span style="color:#66d9ef">nil</span> {
    <span style="color:#a6e22e">color</span>.<span style="color:#a6e22e">Red</span>(<span style="color:#e6db74">&#34;please enter ctrl+c ,io read error: %s \n&#34;</span>, <span style="color:#a6e22e">err</span>)
  }
  <span style="color:#a6e22e">ch</span> <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">body</span>
}



<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {

  <span style="color:#a6e22e">args</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Args</span>[<span style="color:#ae81ff">1</span>:]

  <span style="color:#66d9ef">if</span> len(<span style="color:#a6e22e">args</span>) &lt; <span style="color:#ae81ff">1</span> {
    <span style="color:#a6e22e">color</span>.<span style="color:#a6e22e">Red</span>(<span style="color:#e6db74">&#34;please input the translation word : %s \n&#34;</span>, <span style="color:#e6db74">&#34;---&#34;</span>)
    <span style="color:#a6e22e">color</span>.<span style="color:#a6e22e">GreenString</span>(<span style="color:#e6db74">&#34;example: dict hello\n\n&#34;</span>)
    <span style="color:#a6e22e">os</span>.<span style="color:#a6e22e">Exit</span>(<span style="color:#ae81ff">0</span>)
  }
  <span style="color:#a6e22e">word</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">Join</span>(<span style="color:#a6e22e">args</span>, <span style="color:#e6db74">&#34; &#34;</span>)

  <span style="color:#a6e22e">requestUrl</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprintf</span>(<span style="color:#e6db74">&#34;https://dict.youdao.com//fsearch?client=deskdict&amp;keyfrom=chrome.extension&amp;q=%s&amp;pos=-1&amp;doctype=xml&amp;xmlVersion=3.2&amp;dogVersion=1.0&amp;vendor=unknown&amp;appVer=3.1.17.4208&amp;le=eng&#34;</span>, <span style="color:#a6e22e">url</span>.<span style="color:#a6e22e">QueryEscape</span>(<span style="color:#a6e22e">word</span>))

  <span style="color:#a6e22e">ch</span> <span style="color:#f92672">:=</span> make(<span style="color:#66d9ef">chan</span> []<span style="color:#66d9ef">byte</span>)
  <span style="color:#66d9ef">go</span> <span style="color:#a6e22e">HttpGet</span>(<span style="color:#a6e22e">requestUrl</span>, <span style="color:#a6e22e">ch</span>)
  <span style="color:#a6e22e">xmlObject</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ParseXmlData</span>{}
  <span style="color:#a6e22e">_</span> = <span style="color:#a6e22e">xml</span>.<span style="color:#a6e22e">Unmarshal</span>(<span style="color:#f92672">&lt;-</span><span style="color:#a6e22e">ch</span>, <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">xmlObject</span>)
  <span style="color:#a6e22e">color</span>.<span style="color:#a6e22e">Blue</span>(<span style="color:#e6db74">&#34;**************************** [ 英汉翻译 ]****************************** %s \n\n&#34;</span>, <span style="color:#a6e22e">word</span>)
  <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">xmlObject</span>.<span style="color:#a6e22e">CustomTrans</span>.<span style="color:#a6e22e">Translation</span> {
    <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">_</span> = <span style="color:#a6e22e">color</span>.<span style="color:#a6e22e">New</span>(<span style="color:#a6e22e">color</span>.<span style="color:#a6e22e">BgCyan</span>).<span style="color:#a6e22e">Add</span>(<span style="color:#a6e22e">color</span>.<span style="color:#a6e22e">Bold</span>).<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">TrimSpace</span>(<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Content</span>),<span style="color:#e6db74">&#34;\n&#34;</span>)
  }
  <span style="color:#a6e22e">color</span>.<span style="color:#a6e22e">Green</span>(<span style="color:#e6db74">&#34;**************************** [ 网络释义 ]****************************** %s \n\n&#34;</span>, <span style="color:#a6e22e">word</span>)
  <span style="color:#a6e22e">result</span> <span style="color:#f92672">:=</span> [][]<span style="color:#66d9ef">string</span>{}
  <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">xmlObject</span>.<span style="color:#a6e22e">WebTrans</span>.<span style="color:#a6e22e">TransNode</span> {
    <span style="color:#a6e22e">key</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">TrimSpace</span>(<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Key</span>)
    <span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">vv</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">Trans</span> {
      <span style="color:#a6e22e">value</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">strings</span>.<span style="color:#a6e22e">TrimSpace</span>(<span style="color:#a6e22e">vv</span>.<span style="color:#a6e22e">Value</span>)
      <span style="color:#a6e22e">result</span> = append(<span style="color:#a6e22e">result</span>, []<span style="color:#66d9ef">string</span>{<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">value</span>})
      <span style="color:#75715e">/*_, _ = color.New(color.Bold).Println(key, &#34;:\t\t\t&#34;, value)*/</span>
      <span style="color:#66d9ef">break</span>
    }
  }

  <span style="color:#75715e">// Create Object
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">tabulate</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">gotabulate</span>.<span style="color:#a6e22e">Create</span>(<span style="color:#a6e22e">result</span>)
  <span style="color:#a6e22e">tabulate</span>.<span style="color:#a6e22e">SetAlign</span>(<span style="color:#e6db74">&#34;left&#34;</span>)
  <span style="color:#a6e22e">tabulate</span>.<span style="color:#a6e22e">SetWrapStrings</span>(<span style="color:#66d9ef">true</span>)
  <span style="color:#75715e">// Set Headers
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">tabulate</span>.<span style="color:#a6e22e">SetHeaders</span>([]<span style="color:#66d9ef">string</span>{<span style="color:#e6db74">&#34;KEY&#34;</span>, <span style="color:#e6db74">&#34;VALUE&#34;</span>})
  <span style="color:#75715e">// Render
</span><span style="color:#75715e"></span>  <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">_</span> = <span style="color:#a6e22e">color</span>.<span style="color:#a6e22e">New</span>(<span style="color:#a6e22e">color</span>.<span style="color:#a6e22e">BgBlue</span>).<span style="color:#a6e22e">Add</span>(<span style="color:#a6e22e">color</span>.<span style="color:#a6e22e">Bold</span>).<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">tabulate</span>.<span style="color:#a6e22e">Render</span>(<span style="color:#e6db74">&#34;grid&#34;</span>))

}

</code></pre></div>
    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>smoke </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=/blog/go/transfer-en-zh/>/blog/go/transfer-en-zh/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                #
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="tags/go/">
                    #go</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="/blog/mac/clear-time-machine/" class="prev" rel="prev" title="Clear Time Machine"><i class="iconfont icon-left"></i>&nbsp;Clear Time Machine</a>
         
        
        <a href="/blog/nginx/check-nginx-sh/" class="next" rel="next" title="Check Nginx Sh">Check Nginx Sh&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="">smoke</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  



     </div>
  </body>
</html>
